{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/studio/ai-creative-suite/src/components/ui/textarea.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Textarea({ className, ...props }: React.ComponentProps<\"textarea\">) {\n  return (\n    <textarea\n      data-slot=\"textarea\"\n      className={cn(\n        \"border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Textarea }\n"],"names":[],"mappings":";;;;AAEA;;;AAEA,SAAS,SAAS,EAAE,SAAS,EAAE,GAAG,OAAyC;IACzE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,ucACA;QAED,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 32, "column": 0}, "map": {"version":3,"sources":["file://C%3A/studio/ai-creative-suite/src/components/ui/dialog.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { XIcon } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Dialog({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Root>) {\n  return <DialogPrimitive.Root data-slot=\"dialog\" {...props} />\n}\n\nfunction DialogTrigger({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Trigger>) {\n  return <DialogPrimitive.Trigger data-slot=\"dialog-trigger\" {...props} />\n}\n\nfunction DialogPortal({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Portal>) {\n  return <DialogPrimitive.Portal data-slot=\"dialog-portal\" {...props} />\n}\n\nfunction DialogClose({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Close>) {\n  return <DialogPrimitive.Close data-slot=\"dialog-close\" {...props} />\n}\n\nfunction DialogOverlay({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Overlay>) {\n  return (\n    <DialogPrimitive.Overlay\n      data-slot=\"dialog-overlay\"\n      className={cn(\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogContent({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Content>) {\n  return (\n    <DialogPortal data-slot=\"dialog-portal\">\n      <DialogOverlay />\n      <DialogPrimitive.Content\n        data-slot=\"dialog-content\"\n        className={cn(\n          \"bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n        <DialogPrimitive.Close className=\"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\">\n          <XIcon />\n          <span className=\"sr-only\">Close</span>\n        </DialogPrimitive.Close>\n      </DialogPrimitive.Content>\n    </DialogPortal>\n  )\n}\n\nfunction DialogHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"dialog-header\"\n      className={cn(\"flex flex-col gap-2 text-center sm:text-left\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"dialog-footer\"\n      className={cn(\n        \"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogTitle({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Title>) {\n  return (\n    <DialogPrimitive.Title\n      data-slot=\"dialog-title\"\n      className={cn(\"text-lg leading-none font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogDescription({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Description>) {\n  return (\n    <DialogPrimitive.Description\n      data-slot=\"dialog-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Dialog,\n  DialogClose,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogOverlay,\n  DialogPortal,\n  DialogTitle,\n  DialogTrigger,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;AAGA;AACA;AAEA;AANA;;;;;AAQA,SAAS,OAAO,EACd,GAAG,OAC+C;IAClD,qBAAO,8OAAC,kKAAA,CAAA,OAAoB;QAAC,aAAU;QAAU,GAAG,KAAK;;;;;;AAC3D;AAEA,SAAS,cAAc,EACrB,GAAG,OACkD;IACrD,qBAAO,8OAAC,kKAAA,CAAA,UAAuB;QAAC,aAAU;QAAkB,GAAG,KAAK;;;;;;AACtE;AAEA,SAAS,aAAa,EACpB,GAAG,OACiD;IACpD,qBAAO,8OAAC,kKAAA,CAAA,SAAsB;QAAC,aAAU;QAAiB,GAAG,KAAK;;;;;;AACpE;AAEA,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,8OAAC,kKAAA,CAAA,QAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,GAAG,OACkD;IACrD,qBACE,8OAAC,kKAAA,CAAA,UAAuB;QACtB,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,0JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,QAAQ,EACR,GAAG,OACkD;IACrD,qBACE,8OAAC;QAAa,aAAU;;0BACtB,8OAAC;;;;;0BACD,8OAAC,kKAAA,CAAA,UAAuB;gBACtB,aAAU;gBACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,+WACA;gBAED,GAAG,KAAK;;oBAER;kCACD,8OAAC,kKAAA,CAAA,QAAqB;wBAAC,WAAU;;0CAC/B,8OAAC,gMAAA,CAAA,QAAK;;;;;0CACN,8OAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAKpC;AAEA,SAAS,aAAa,EAAE,SAAS,EAAE,GAAG,OAAoC;IACxE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,gDAAgD;QAC7D,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,aAAa,EAAE,SAAS,EAAE,GAAG,OAAoC;IACxE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,0DACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,8OAAC,kKAAA,CAAA,QAAqB;QACpB,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,kBAAkB,EACzB,SAAS,EACT,GAAG,OACsD;IACzD,qBACE,8OAAC,kKAAA,CAAA,cAA2B;QAC1B,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 205, "column": 0}, "map": {"version":3,"sources":["file://C%3A/studio/ai-creative-suite/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Input({ className, type, ...props }: React.ComponentProps<\"input\">) {\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        \"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        \"focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]\",\n        \"aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Input }\n"],"names":[],"mappings":";;;;AAEA;;;AAEA,SAAS,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAsC;IACzE,qBACE,8OAAC;QACC,MAAM;QACN,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,mcACA,iFACA,0GACA;QAED,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 231, "column": 0}, "map": {"version":3,"sources":["file://C%3A/studio/ai-creative-suite/src/components/ui/label.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Label({\n  className,\n  ...props\n}: React.ComponentProps<typeof LabelPrimitive.Root>) {\n  return (\n    <LabelPrimitive.Root\n      data-slot=\"label\"\n      className={cn(\n        \"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Label }\n"],"names":[],"mappings":";;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,MAAM,EACb,SAAS,EACT,GAAG,OAC8C;IACjD,qBACE,8OAAC,iKAAA,CAAA,OAAmB;QAClB,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,uNACA;QAED,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 283, "column": 0}, "map": {"version":3,"sources":["file://C%3A/studio/ai-creative-suite/src/app/studios/image-studio/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect, useCallback, FormEvent, useRef } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { Button } from \"@/components/ui/button\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n  DialogClose,\n} from \"@/components/ui/dialog\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Camera, Wand2, Image as ImageIcon, Sparkles, Settings2, RectangleHorizontal, Users, Loader2, Video, Download, Share2, LogIn } from \"lucide-react\";\nimport { \n  DropdownMenu, \n  DropdownMenuContent, \n  DropdownMenuItem, \n  DropdownMenuLabel, \n  DropdownMenuSeparator, \n  DropdownMenuTrigger \n} from \"@/components/ui/dropdown-menu\";\nimport { cn } from '@/lib/utils';\nimport { createClient } from '@/lib/supabase/client';\nimport { toast } from \"sonner\";\nimport JSZip from 'jszip';\nimport Link from 'next/link';\n\n// Define aspect ratios for images\nconst imageAspectRatios = [\"1:1\", \"16:9\", \"9:16\", \"4:3\", \"3:4\"];\n\n\n// Define a type for generated image items (matching worker response)\ninterface GeneratedImage {\n  id: string;\n  prompt: string;\n  aspectRatio: string;\n  model?: string; // Model might not always be present if default is used\n  r2_object_key: string;\n  created_at: string;\n  displayUrl: string; // This will hold the presigned URL from the worker\n}\n\n// Define the type for custom model items from the backend\ninterface CustomModel {\n  id: string;\n  trigger_word: string;\n  training_status: 'pending' | 'processing' | 'completed' | 'failed';\n  created_at: string;\n  error_message: string | null;\n}\n\n// Define the worker API base URL (replace if different)\nconst WORKER_API_URL = 'https://my-ai-worker.khansameersam96.workers.dev'; // Deployed worker URL\n\nexport default function ImageStudio() {\n  const router = useRouter();\n  const supabase = createClient();\n  const [prompt, setPrompt] = useState('');\n  const [isFocused, setIsFocused] = useState(false);\n  const [aspectRatioIndex, setAspectRatioIndex] = useState(0);\n  // ** Removed: const [selectedModel, setSelectedModel] = useState(trainedModels[0]); **\n  const [generatedImages, setGeneratedImages] = useState<GeneratedImage[]>([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [isGalleryLoading, setIsGalleryLoading] = useState(true);\n  const [galleryError, setGalleryError] = useState<string | null>(null);\n  const [showLoginPrompt, setShowLoginPrompt] = useState(false);\n\n  // --- State for Custom Models ---\n  const [customModels, setCustomModels] = useState<CustomModel[]>([]);\n  const [selectedModelIdentifier, setSelectedModelIdentifier] = useState<string>('Standard'); // Default to Standard, store ID or trigger_word\n  const [isModelsLoading, setIsModelsLoading] = useState<boolean>(true);\n  const [modelsError, setModelsError] = useState<string | null>(null);\n\n  // Ref to store the polling interval ID\n  const modelsPollingIntervalRef = useRef<NodeJS.Timeout | null>(null); \n\n  // State for training modal\n  const [isTrainingModalOpen, setIsTrainingModalOpen] = useState(false);\n  const [selectedFiles, setSelectedFiles] = useState<FileList | null>(null);\n  const [triggerWord, setTriggerWord] = useState('');\n  const [isTrainingSubmitting, setIsTrainingSubmitting] = useState(false);\n\n  const currentAspectRatio = imageAspectRatios[aspectRatioIndex];\n\n  const handleAspectRatioChange = () => {\n    setAspectRatioIndex((prevIndex) => (prevIndex + 1) % imageAspectRatios.length);\n  };\n\n  const getSessionToken = async () => {\n    const { data: { session } } = await supabase.auth.getSession();\n    return session?.access_token;\n  };\n\n  // --- Fetch Models Function ---\n  const fetchModels = useCallback(async (isInitialLoad = false) => {\n    if (isInitialLoad) {\n      setIsModelsLoading(true);\n    setModelsError(null); \n    }\n\n    const token = await getSessionToken();\n\n    if (!token) {\n      console.warn(\"Polling fetchModels: please login to see your custom models.\");\n      setCustomModels([]);\n      if (isInitialLoad) {\n        setIsModelsLoading(false);\n      }\n      return;\n    }\n\n    try {\n      const response = await fetch(`${WORKER_API_URL}/api/models`, {\n        headers: { 'Authorization': `Bearer ${token}` }\n      });\n\n      if (!response.ok) {\n        let errorMessage = \"Failed to fetch models\";\n        try {\n            const errorData = await response.json();\n            if (errorData && typeof errorData.message === 'string') {\n                errorMessage = errorData.message;\n            }\n        } catch (parseError) {\n            console.error(\"Could not parse error response as JSON:\", parseError);\n            errorMessage = `HTTP error! status: ${response.status}`;\n        }\n        throw new Error(errorMessage);\n      }\n\n      const data: CustomModel[] = await response.json();\n      setCustomModels(data);\n\n    } catch (error: any) {\n      console.error(\"Error fetching custom models:\", error);\n      if (isInitialLoad) {\n        const displayMessage = error.message || \"An unknown error occurred while fetching models.\";\n        setModelsError(displayMessage);\n        toast.error(displayMessage);\n        setCustomModels([]);\n      } else {\n        console.warn(\"failed to fetch models:\", error.message);\n      }\n    } finally {\n      if (isInitialLoad) {\n         setIsModelsLoading(false);\n      }\n    }\n  }, [supabase]);\n\n  // Define fetchGallery using useCallback\n  const fetchGallery = useCallback(async () => {\n    setIsGalleryLoading(true); \n    setGalleryError(null);\n    setShowLoginPrompt(false);\n    const token = await getSessionToken();\n\n    if (!token) {\n      setShowLoginPrompt(true);\n      setGeneratedImages([]);\n      setIsGalleryLoading(false);\n      return;\n    }\n\n    try {\n      const response = await fetch(`${WORKER_API_URL}/api/gallery`, {\n        headers: { 'Authorization': `Bearer ${token}` }\n      });\n\n      if (!response.ok) {\n        let errorMessage = \"Failed to fetch gallery\";\n        try {\n            const errorData = await response.json();\n            if (errorData && typeof errorData.message === 'string') {\n                errorMessage = errorData.message;\n            }\n        } catch (parseError) {\n            console.error(\"Could not parse error response as JSON:\", parseError);\n            errorMessage = `HTTP error! status: ${response.status}`;\n        }\n        throw new Error(errorMessage);\n      }\n\n      const data: GeneratedImage[] = await response.json();\n      setGeneratedImages(data);\n    } catch (error: any) {\n      console.error(\"Error fetching gallery:\", error);\n      const displayMessage = error.message || \"An unknown error occurred while fetching the gallery.\";\n      setGalleryError(displayMessage);\n      toast.error(displayMessage);\n      setGeneratedImages([]);\n    } finally {\n      if (!showLoginPrompt) { \n          setIsGalleryLoading(false);\n      }\n    }\n  }, [supabase]);\n\n  // --- UseEffect to fetch data on mount ---\n  useEffect(() => {\n    Promise.all([\n      fetchGallery(), \n      fetchModels(true)\n    ])\n      .catch(err => console.error(\"Error during initial data fetch:\", err))\n  }, [fetchGallery, fetchModels]); \n\n  // --- UseEffect to check URL hash for opening training modal ---\n  useEffect(() => {\n    if (window.location.hash === '#train') {\n      setIsTrainingModalOpen(true);\n    }\n  }, []);\n\n  // --- UseEffect for Polling Model Status --- \n  useEffect(() => {\n    const POLLING_INTERVAL_MS = 30000; // Poll every 30 seconds\n    const MAX_PENDING_PROCESSING_AGE_MINUTES = 15; // Stop polling for jobs older than 15 minutes\n\n    // Check if any RECENT models are in a non-final state\n    const now = new Date();\n    const needsPolling = customModels.some((model) => {\n        const status = model.training_status;\n        if (status === 'pending' || status === 'processing') {\n            try {\n                const createdAt = new Date(model.created_at);\n                // Calculate age in minutes\n                const ageMinutes = (now.getTime() - createdAt.getTime()) / (1000 * 60);\n                // Only consider polling if the job is younger than the threshold\n                return ageMinutes < MAX_PENDING_PROCESSING_AGE_MINUTES; \n            } catch (e) {\n                console.error(\"Error parsing model created_at date:\", model.created_at, e);\n                return false; // Don't poll if date is invalid\n            }\n        }\n        return false; // Don't poll for completed or failed states\n    });\n\n    if (needsPolling && !modelsPollingIntervalRef.current) {\n      // Start polling only if needed and not already running\n      console.log(\"Starting models status polling for recent jobs...\");\n      modelsPollingIntervalRef.current = setInterval(() => {\n        console.log(\"Polling for model status updates...\");\n        fetchModels(); \n      }, POLLING_INTERVAL_MS);\n    } else if (!needsPolling && modelsPollingIntervalRef.current) {\n      // Stop polling if no longer needed (no recent pending/processing jobs) or currently running\n      console.log(\"Stopping models status polling (no recent pending/processing jobs).\");\n      clearInterval(modelsPollingIntervalRef.current);\n      modelsPollingIntervalRef.current = null;\n    }\n\n    // Cleanup function: Stop polling when the component unmounts\n    return () => {\n      if (modelsPollingIntervalRef.current) {\n        console.log(\"Clearing models status polling interval on unmount.\");\n        clearInterval(modelsPollingIntervalRef.current);\n        modelsPollingIntervalRef.current = null;\n      }\n    };\n  }, [customModels, fetchModels]); // Rerun this effect when models list changes\n\n  // --- Handle Submit - Update auth handling for redirect ---\n  const handleSubmit = async () => {\n    setIsLoading(true);\n    const token = await getSessionToken();\n\n    if (!token) {\n      setIsLoading(false);\n      router.push('/auth');\n      return;\n    }\n\n    toast.info(\"Starting image generation...\");\n    \n    const payload = {\n      prompt,\n      aspectRatio: currentAspectRatio,\n      modelIdentifier: selectedModelIdentifier\n    };\n    console.log(\"Sending generation request with payload:\", payload);\n\n    try {\n      const response = await fetch(`${WORKER_API_URL}/api/generate-image`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`,\n        },\n        body: JSON.stringify(payload),\n      });\n\n      if (!response.ok) {\n        let errorMessage = \"Image generation failed\";\n        try {\n            const errorData = await response.json();\n            if (errorData && typeof errorData.message === 'string') {\n                errorMessage = errorData.message;\n            }\n        } catch (parseError) {\n            console.error(\"Could not parse error response as JSON:\", parseError);\n            errorMessage = `HTTP error! status: ${response.status}`;\n        }\n        throw new Error(errorMessage);\n      }\n\n      const result = await response.json(); \n      console.log('Generation successful, worker response:', result);\n      toast.success(\"Image generated successfully!\");\n      fetchGallery();\n\n    } catch (error: any) {\n      console.error(\"Image generation process failed:\", error);\n      toast.error(error.message || \"An unknown error occurred during generation.\");\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // --- Handle Training Submit - Update error handling ---\n  const handleTrainingSubmit = async (event: FormEvent<HTMLFormElement>) => {\n     event.preventDefault();\n    setIsTrainingSubmitting(true);\n    toast.info(\"Preparing training data...\");\n\n    // --- Validation ---\n    if (!selectedFiles || selectedFiles.length < 7) { // Example: Require min 7 images\n        toast.error(\"Please select at least 7 images for training.\");\n        setIsTrainingSubmitting(false);\n        return;\n    }\n    if (!triggerWord.trim()) {\n        toast.error(\"Please enter a trigger word for your model.\");\n        setIsTrainingSubmitting(false);\n        return;\n    }\n\n    // --- 1. Zip files using JSZip ---\n    let zipBlob: Blob;\n    try {\n        const zip = new JSZip();\n        for (let i = 0; i < selectedFiles.length; i++) {\n            const file = selectedFiles[i];\n            // Use original filename within the zip\n            zip.file(file.name, file); \n        }\n        zipBlob = await zip.generateAsync({ type: \"blob\", compression: \"DEFLATE\" });\n        console.log(\"Zip file created, size:\", (zipBlob.size / 1024).toFixed(2), \"KB\");\n        toast.info(\"Training data zipped successfully.\");\n    } catch (zipError: any) {\n         console.error(\"Error creating zip file:\", zipError);\n         toast.error(`Failed to zip files: ${zipError.message}`);\n         setIsTrainingSubmitting(false);\n         return;\n    }\n\n    // --- 2. Create FormData ---\n    const formData = new FormData();\n    formData.append('trigger_word', triggerWord.trim());\n    // Important: Provide a filename for the blob when appending\n    formData.append('zipFile', zipBlob, `${triggerWord}_training_images.zip`); \n\n    // --- 3. Get session token ---\n    const token = await getSessionToken();\n    if (!token) {\n      toast.error(\"Authentication required to train models.\");\n      setIsTrainingSubmitting(false);\n      return;\n    }\n\n    // --- 4. Call POST /api/train-model ---\n    try {\n         toast.info(\"let Us Cook...\");\n        const response = await fetch(`${WORKER_API_URL}/api/train-model`, {\n            method: 'POST',\n             headers: { 'Authorization': `Bearer ${token}` },\n            body: formData,\n        });\n\n        if (!response.ok) {\n             let errorMessage = \"Training submission failed\";\n            try {\n                const errorData = await response.json();\n                 if (errorData && typeof errorData.message === 'string') {\n                     errorMessage = errorData.message;\n                 }\n            } catch (jsonError) {\n                console.error(\"Could not parse error response as JSON:\", jsonError);\n                 errorMessage = `HTTP error! status: ${response.status}`;\n            }\n             throw new Error(errorMessage);\n        }\n\n        const result = await response.json(); \n         console.log('Training Started successfully:', result);\n         toast.success(`Training started for model: ${triggerWord}!`);\n        \n        // --- 5. Handle Success: Close modal & Reset Form ---\n        setIsTrainingModalOpen(false); \n        setTriggerWord(''); \n        setSelectedFiles(null);\n        // Clear the file input visually\n        const fileInput = document.getElementById('training-file-input') as HTMLInputElement | null;\n        if(fileInput) fileInput.value = '';\n        \n        // *** Refresh the models list ***\n         fetchModels(true);\n\n    } catch (error: any) {\n        console.error(\"Training submission failed:\", error);\n         toast.error(error.message || \"An unknown error occurred during training submission.\");\n    } finally {\n        setIsTrainingSubmitting(false);\n    }\n  };\n\n  // --- Handle Download ---\n  const handleDownload = async (imageUrl: string, prompt: string) => {\n    if (!imageUrl || imageUrl === '#placeholder' || imageUrl === '#error-generating-url') {\n      toast.error(\"Cannot download image, URL is invalid.\");\n      return;\n    }\n    toast.info(\"Preparing download...\");\n    try {\n      const response = await fetch(imageUrl);\n      if (!response.ok) {\n        throw new Error(`Failed to fetch image: ${response.statusText}`);\n      }\n      const blob = await response.blob();\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.style.display = 'none';\n      a.href = url;\n      // Create a safe filename from the prompt\n      const filename = (prompt || 'generated-image').replace(/[^a-z0-9]/gi, '_').toLowerCase().substring(0, 50) + '.png'; // Assuming png, adjust if needed\n      a.download = filename;\n      document.body.appendChild(a);\n      a.click();\n      window.URL.revokeObjectURL(url);\n      a.remove();\n      toast.success(\"Image download started.\");\n    } catch (error: any) {\n      console.error(\"Download failed:\", error);\n      toast.error(`Download failed: ${error.message}`);\n    }\n  };\n\n  // --- Handle Share (Basic: Copy Link) ---\n  const handleShare = (imageUrl: string) => {\n     if (!imageUrl || imageUrl === '#placeholder' || imageUrl === '#error-generating-url') {\n      toast.error(\"Cannot share image, URL is invalid.\");\n      return;\n    }\n    // Basic share: Copy image URL to clipboard\n    navigator.clipboard.writeText(imageUrl)\n      .then(() => {\n        toast.success(\"Image link copied to clipboard!\");\n      })\n      .catch(err => {\n        console.error(\"Failed to copy link:\", err);\n        toast.error(\"Failed to copy image link.\");\n      });\n    // Future enhancement: Use Web Share API if available navigator.share(...)\n  };\n\n  // --- Render Logic ---\n  return (\n    <div className=\"container mx-auto max-w-6xl py-8 flex-1 flex flex-col\">\n      <div className=\"flex flex-col items-center\">\n        <div className=\"text-center mb-12\">\n          <div className=\"flex items-center justify-center gap-4 mb-4\">\n            <Camera className=\"h-8 w-8 text-primary\" />\n            <div className=\"flex flex-col items-start\">\n              <h1 className=\"text-4xl font-playfair\">IMAGE STUDIO</h1>\n              <p className=\"text-sm text-muted-foreground mt-1 font-manrope\">\n                Play With Our New SOTA Model, <br /> \n                Imagine Anything, Generate Anything\n              </p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"w-full max-w-2xl space-y-4 mb-12\">\n          <div \n            className={cn(\n              \"relative rounded-lg border border-input bg-card p-1 focus-within:border-primary focus-within:ring-2 focus-within:ring-primary/30 transition-all\",\n              isFocused && \"border-primary ring-2 ring-primary/30 shadow-lg shadow-primary/10\"\n            )}\n          >\n            <Textarea \n              value={prompt}\n              onChange={(e) => setPrompt(e.target.value)}\n              onFocus={() => setIsFocused(true)}\n              onBlur={() => setIsFocused(false)}\n              placeholder=\"Describe the image you want to generate...or train your own model!\"\n              rows={3}\n              className=\"resize-none border-none bg-transparent focus-visible:ring-0 focus-visible:ring-offset-0 p-3 pr-20 text-base placeholder:text-muted-foreground/60 shadow-none\"\n              disabled={isLoading}\n            />\n            <div className=\"absolute bottom-3 right-3\">\n              <Button size=\"sm\" className=\"gap-1.5\" onClick={handleSubmit} disabled={!prompt.trim() || isLoading}>\n                {isLoading ? <Loader2 className=\"h-4 w-4 animate-spin\" /> : <Sparkles className=\"h-4 w-4\" />}\n                {isLoading ? 'Generating...' : 'Generate'}\n              </Button>\n            </div>\n          </div>\n          \n          <div className=\"flex flex-wrap items-center gap-2\">\n            {/* --- Updated Model Dropdown --- */}\n            <DropdownMenu>\n              <DropdownMenuTrigger asChild>\n                <Button variant=\"outline\" size=\"sm\" className=\"gap-1.5\" disabled={isLoading || isTrainingSubmitting || isModelsLoading}>\n                  <Users className=\"h-4 w-4\" />\n                  {/* Display loading state or selected model */}\n                  {isModelsLoading ? 'Loading Models...' : selectedModelIdentifier}\n                </Button>\n              </DropdownMenuTrigger>\n              <DropdownMenuContent align=\"start\">\n                <DropdownMenuLabel>Select Model</DropdownMenuLabel>\n                <DropdownMenuSeparator />\n                {/* Standard Base Model */}\n                <DropdownMenuItem \n                    onSelect={() => setSelectedModelIdentifier('Standard')}\n                    disabled={isLoading || isTrainingSubmitting}\n                >\n                    Standard\n                </DropdownMenuItem>\n                {/* Custom Models */}\n                {modelsError && <DropdownMenuItem disabled className=\"text-red-500 text-xs\">Error loading models</DropdownMenuItem>}\n                {!isModelsLoading && customModels.length === 0 && !modelsError && <DropdownMenuItem disabled className=\"text-muted-foreground text-xs\">No custom models trained</DropdownMenuItem>}\n                {customModels.map((model) => (\n                  <DropdownMenuItem \n                    key={model.id}\n                    onSelect={() => setSelectedModelIdentifier(model.trigger_word)} // Select using trigger_word\n                    disabled={isLoading || isTrainingSubmitting || model.training_status !== 'completed'} // Disable if not completed\n                    className=\"flex justify-between items-center\"\n                  >\n                    <span>{model.trigger_word}</span>\n                    {model.training_status === 'pending' && <span className=\"text-xs text-muted-foreground ml-2\">(Pending...)</span>}\n                    {model.training_status === 'processing' && <Loader2 className=\"h-3 w-3 animate-spin text-blue-500 ml-2\" />}\n                    {model.training_status === 'failed' && <span className=\"text-xs text-red-500 ml-2\">(Failed)</span>}\n                     {/* Add tooltip for failed reason? */}\n                     {model.training_status === 'failed' && model.error_message && (\n                        <span title={model.error_message} className=\"cursor-help ml-1\">ℹ️</span>\n                     )}\n                  </DropdownMenuItem>\n                ))}\n              </DropdownMenuContent>\n            </DropdownMenu>\n\n            {/* --- Training Modal Dialog (ensure form uses correct state) --- */}\n            <Dialog open={isTrainingModalOpen} onOpenChange={setIsTrainingModalOpen}>\n              <DialogTrigger asChild>\n                 <Button variant=\"outline\" size=\"sm\" className=\"gap-1.5\" disabled={isLoading || isTrainingSubmitting}>\n                  <Wand2 className=\"h-4 w-4\" />\n                  Train Model\n                </Button>\n              </DialogTrigger>\n              <DialogContent className=\"sm:max-w-3xl\">\n                <form onSubmit={handleTrainingSubmit}>\n                    <DialogHeader className=\"mb-4\">\n                    <DialogTitle>Train Custom Image Model</DialogTitle>\n                    <DialogDescription>\n                        Why take a new selfie when AI remembers your best angle? Train your own model now and generate infinite images of your choice! Because taking one good pic shouldn't mean only one post.\n                    </DialogDescription>\n                    </DialogHeader>\n\n                    {/* Example Training Images with Prompts */}\n                    <div className=\"flex justify-center items-center gap-4 my-6\">\n                        {/* Real training images with prompts overlay and animations */}\n                        <div className=\"w-36 h-48 rounded-lg overflow-hidden shadow-md transform -rotate-3 relative group hover:z-10 animate-float-slow hover:scale-105 transition-all duration-500\">\n                            <img \n                                src=\"/gallery/train-images/carry_minati_at_the_nasa__wearing_white_coat__stan (1).png\" \n                                alt=\"Training example 1\" \n                                className=\"w-full h-full object-cover\"\n                            />\n                            <div className=\"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent opacity-0 group-hover:opacity-100 transition-opacity p-2 flex items-end\">\n                                <p className=\"text-xs text-white/90 line-clamp-3\">Carry Minati at NASA wearing a white lab coat</p>\n                            </div>\n                        </div>\n                        <div className=\"w-36 h-48 rounded-lg overflow-hidden shadow-lg z-10 relative group hover:z-20 animate-float-medium hover:scale-105 transition-all duration-500\">\n                            <img \n                                src=\"/gallery/train-images/carry_minati_carry_mianti_at_the_cricket_stadium__.png\" \n                                alt=\"Training example 2\" \n                                className=\"w-full h-full object-cover\"\n                            />\n                            <div className=\"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent opacity-0 group-hover:opacity-100 transition-opacity p-2 flex items-end\">\n                                <p className=\"text-xs text-white/90 line-clamp-3\">Carry Minati at cricket stadium, watching a match</p>\n                            </div>\n                        </div>\n                        <div className=\"w-36 h-48 rounded-lg overflow-hidden shadow-md transform rotate-3 relative group hover:z-10 animate-float-fast hover:scale-105 transition-all duration-500\">\n                            <img \n                                src=\"/gallery/train-images/man_at_beach.png\" \n                                alt=\"Training example 3\" \n                                className=\"w-full h-full object-cover\"\n                            />\n                            <div className=\"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent opacity-0 group-hover:opacity-100 transition-opacity p-2 flex items-end\">\n                                <p className=\"text-xs text-white/90 line-clamp-3\">Man at the beach with sun in background</p>\n                            </div>\n                        </div>\n                    </div>\n\n                    {/* CSS keyframes and animation classes for the image cards */}\n                    <style jsx global>{`\n                        @keyframes float-slow {\n                            0% { transform: translateY(0px) rotate(-3deg); }\n                            50% { transform: translateY(-10px) rotate(-2deg); }\n                            100% { transform: translateY(0px) rotate(-3deg); }\n                        }\n                        @keyframes float-medium {\n                            0% { transform: translateY(0px); }\n                            65% { transform: translateY(-8px); }\n                            100% { transform: translateY(0px); }\n                        }\n                        @keyframes float-fast {\n                            0% { transform: translateY(0px) rotate(3deg); }\n                            35% { transform: translateY(-12px) rotate(4deg); }\n                            100% { transform: translateY(0px) rotate(3deg); }\n                        }\n                        .animate-float-slow {\n                            animation: float-slow 6s ease-in-out infinite;\n                        }\n                        .animate-float-medium {\n                            animation: float-medium 4.5s ease-in-out infinite;\n                        }\n                        .animate-float-fast {\n                            animation: float-fast 5s ease-in-out infinite;\n                        }\n                    `}</style>\n\n                    {/* Form fields with stacked labels */}\n                    <div className=\"space-y-6\"> \n                        {/* Trigger Word - Stacked */}\n                        <div className=\"space-y-2\"> \n                            <Label htmlFor=\"trigger-word\" className=\"font-medium\"> \n                                Trigger Word (Required) used to activate your model during generation\n                            </Label>\n                            <Input \n                                id=\"trigger-word\"\n                                value={triggerWord}\n                                onChange={(e) => setTriggerWord(e.target.value)}\n                                placeholder=\"e.g., mydog_style\" \n                                className=\"col-span-3\"\n                                required\n                                disabled={isTrainingSubmitting}\n                            />\n                        </div>\n\n                        {/* Images Input - Stacked */}\n                        <div className=\"space-y-2\"> \n                            <Label htmlFor=\"training-file-input\" className=\"font-medium\">\n                                Training Images\n                            </Label>\n                            <div className=\"space-y-2\"> \n                                <Input \n                                    id=\"training-file-input\"\n                                    type=\"file\"\n                                    multiple \n                                    accept=\"image/*\" \n                                    className=\"file:mr-4 file:py-2 file:px-4 file:rounded-md file:border file:border-input file:bg-transparent file:text-sm file:font-medium file:text-foreground hover:file:bg-accent hover:file:text-accent-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 cursor-pointer\"\n                                    required\n                                    onChange={(e) => setSelectedFiles(e.target.files)}\n                                    disabled={isTrainingSubmitting}\n                                />\n                                <p className=\"text-xs text-muted-foreground\">Select 7+ images (10 recommended). Clear, varied examples work best.</p> \n                            </div>\n                        </div>\n                    </div>\n                    \n                    <DialogFooter className=\"pt-6 gap-2 sm:gap-0\"> \n                         <DialogClose asChild>\n                            <Button type=\"button\" variant=\"outline\" disabled={isTrainingSubmitting}>Cancel</Button>\n                         </DialogClose>\n                        <Button type=\"submit\" disabled={!triggerWord.trim() || !selectedFiles || selectedFiles.length === 0 || isTrainingSubmitting}>\n                            {isTrainingSubmitting ? <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" /> : null}\n                            {isTrainingSubmitting ? 'Submitting...' : 'Start Training'}\n                        </Button>\n                    </DialogFooter>\n                 </form>\n              </DialogContent>\n            </Dialog>\n\n            {/* --- Aspect Ratio Button (remains the same) --- */}\n            <Button variant=\"outline\" size=\"sm\" className=\"gap-1.5\" onClick={handleAspectRatioChange} disabled={isLoading || isTrainingSubmitting}>\n              <RectangleHorizontal className=\"h-4 w-4\" />\n              {currentAspectRatio}\n            </Button>\n          </div>\n        </div>\n      </div>\n      \n      <div className=\"w-full mt-12\">\n        <h2 className=\"text-xl font-semibold mb-6\">Generated Images</h2>\n        \n        {showLoginPrompt && (\n          <div className=\"text-center flex justify-center py-10\"> \n            <Button \n              asChild \n              size=\"lg\" \n              className={cn(\n                \"gap-2\",\n                \"bg-gradient-to-r from-sidebar-primary via-primary to-sidebar-primary animate-background-pan bg-[length:200%_auto]\",\n                \"hover:brightness-110 transition-all\"\n              )}\n            >\n              <Link href=\"/auth\">\n                Login / Signup\n              </Link>\n            </Button>\n          </div>\n        )}\n\n        {!showLoginPrompt && isGalleryLoading && (\n          <div className=\"flex justify-center items-center p-10\">\n            <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\n          </div>\n        )}\n        \n        {!showLoginPrompt && galleryError && (\n          <div className=\"text-center text-red-500 p-10 border border-dashed border-red-500/30 rounded-lg bg-red-500/5\">\n            Error loading gallery: {galleryError}\n          </div>\n        )}\n        \n        {!showLoginPrompt && !isGalleryLoading && !galleryError && generatedImages.length === 0 && (\n           <div className=\"text-center text-muted-foreground p-10 border border-dashed border-border rounded-lg bg-card/50\">\n            No images generated yet. Use the prompt above to create some!\n          </div>\n        )}\n        \n        {!showLoginPrompt && !isGalleryLoading && !galleryError && generatedImages.length > 0 && (\n          <div className=\"my-masonry-grid columns-2 md:columns-3 lg:columns-4 xl:columns-5 gap-4 space-y-4\">\n            {generatedImages.map((image) => (\n              <div key={image.id} className=\"bg-card border rounded-lg overflow-hidden group cursor-pointer relative shadow-sm hover:shadow-md transition-shadow break-inside-avoid\">\n                <div \n                  className={cn(\n                    \"bg-muted flex items-center justify-center\",\n                    image.aspectRatio === \"1:1\" && \"aspect-square\",\n                    image.aspectRatio === \"16:9\" && \"aspect-video\",\n                    image.aspectRatio === \"9:16\" && \"aspect-[9/16]\",\n                    image.aspectRatio === \"4:3\" && \"aspect-[4/3]\",\n                    image.aspectRatio === \"3:4\" && \"aspect-[3/4]\"\n                  )}\n                >\n                  {image.displayUrl && image.displayUrl !== '#placeholder' && image.displayUrl !== '#error-generating-url' ? (\n                    <img \n                      src={image.displayUrl} \n                      alt={image.prompt || 'Generated image'} \n                      className=\"object-cover w-full h-full\" \n                      loading=\"lazy\" \n                    />\n                  ) : (\n                    <ImageIcon className=\"h-10 w-10 text-muted-foreground/30\" /> \n                  )}\n                </div>\n                <div className=\"absolute inset-0 bg-gradient-to-t from-black/80 via-black/30 to-transparent p-3 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col justify-between\">\n                  <p className=\"text-xs text-white/90 line-clamp-3 mt-auto\">{image.prompt || 'No prompt provided'}</p>\n                  <div className=\"absolute top-2 right-2 flex items-center gap-1.5\">\n                     <Button \n                       variant=\"ghost\" \n                       size=\"icon\" \n                       className=\"h-7 w-7 text-white/80 hover:bg-black/30 hover:text-white\"\n                       title=\"Share\"\n                       onClick={(e) => { e.stopPropagation(); handleShare(image.displayUrl); }}\n                     >\n                       <Share2 className=\"h-4 w-4\" />\n                     </Button>\n                     <Button \n                       variant=\"ghost\" \n                       size=\"icon\" \n                       className=\"h-7 w-7 text-white/80 hover:bg-black/30 hover:text-white\"\n                       title=\"Download\"\n                       onClick={(e) => { e.stopPropagation(); handleDownload(image.displayUrl, image.prompt); }}\n                     >\n                       <Download className=\"h-4 w-4\" />\n                     </Button>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n} "],"names":[],"mappings":"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","debugId":null}}]
}